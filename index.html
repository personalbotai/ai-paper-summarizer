<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Research Paper Summarizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .paper-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .paper-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
        }
        .skeleton {
            background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            margin-right: 0.25rem;
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <nav class="bg-gray-800 border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-robot text-blue-400 text-xl mr-2"></i>
                    <span class="text-xl font-bold text-blue-400">AI Paper Summarizer</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#" class="bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium">Search</a>
                        <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Recent</a>
                        <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">About</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-white mb-4">AI Research Paper Summarizer</h1>
            <p class="text-gray-400 max-w-2xl mx-auto">
                Get instant summaries of AI/ML research papers from ArXiv. Enter a paper ID, URL, or search by keywords.
            </p>
        </div>

        <!-- Search Section -->
        <div class="max-w-3xl mx-auto mb-12">
            <div class="bg-gray-800 rounded-lg p-6 shadow-lg">
                <div class="flex flex-col md:flex-row gap-4 mb-4">
                    <div class="flex-1">
                        <input type="text" id="search-input" placeholder="arXiv ID (e.g., 2301.07041) or search keywords..." class="w-full bg-gray-700 text-white px-4 py-3 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500">
                    </div>
                    <button id="search-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg flex items-center justify-center">
                        <i class="fas fa-search mr-2"></i> Search
                    </button>
                </div>
                <div class="text-sm text-gray-400">
                    <i class="fas fa-lightbulb mr-1"></i>
                    Try: <button class="text-blue-400 hover:underline" data-search="transformer">"transformer"</button> or 
                    <button class="text-blue-400 hover:underline" data-search="2301.07041">2301.07041</button>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="hidden max-w-4xl mx-auto">
            <div class="bg-gray-800 rounded-lg p-8 text-center">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"></div>
                <p class="text-gray-300">Fetching paper and generating summary...</p>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results" class="max-w-4xl mx-auto">
            <!-- Paper cards will be inserted here -->
        </div>

        <!-- Paper Detail Modal -->
        <div id="paper-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center z-50 p-4">
            <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="sticky top-0 bg-gray-800 border-b border-gray-700 p-4 flex justify-between items-center">
                    <h2 class="text-xl font-bold text-white" id="modal-title">Paper Details</h2>
                    <button id="close-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                <div class="p-6" id="modal-content">
                    <!-- Content will be populated -->
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 border-t border-gray-700 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <p class="text-center text-gray-400 text-sm">
                <i class="fas fa-info-circle mr-1"></i>
                This demo uses the ArXiv API. Actual AI summarization would require a backend service (e.g., OpenAI API, local LLM).
            </p>
        </div>
    </footer>

    <script>
        const API_BASE = 'https://export.arxiv.org/api/query';
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const loadingEl = document.getElementById('loading');
        const resultsEl = document.getElementById('results');
        const modal = document.getElementById('paper-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');

        // Quick search buttons
        document.querySelectorAll('[data-search]').forEach(btn => {
            btn.addEventListener('click', () => {
                searchInput.value = btn.dataset.search;
                performSearch();
            });
        });

        // Event listeners
        searchBtn.addEventListener('click', performSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') performSearch();
        });
        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });
        modal.addEventListener('click', (e) => {
            if (e.target === modal) modal.classList.add('hidden');
        });

        async function performSearch() {
            const query = searchInput.value.trim();
            if (!query) return;

            loadingEl.classList.remove('hidden');
            resultsEl.innerHTML = '';

            try {
                let papers = [];
                
                // Check if query looks like an arXiv ID
                if (/^\d{4}\.\d{4,5}$/.test(query) || /^arXiv:\d{4}\.\d{4,5}/.test(query)) {
                    const arxivId = query.replace('arXiv:', '');
                    papers = await fetchPaperById(arxivId);
                } else {
                    papers = await searchPapers(query);
                }

                displayResults(papers);
            } catch (error) {
                resultsEl.innerHTML = `
                    <div class="bg-red-900 border border-red-700 rounded-lg p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-red-400 text-3xl mb-3"></i>
                        <p class="text-red-200">Error: ${error.message}</p>
                    </div>
                `;
            } finally {
                loadingEl.classList.add('hidden');
            }
        }

        async function fetchPaperById(id) {
            const response = await fetch(
                `${API_BASE}?id=arXiv:${id}&start=0&max_results=1`,
                {
                    headers: {
                        'Accept': 'application/atom+xml'
                    }
                }
            );
            if (!response.ok) throw new Error('Failed to fetch paper');
            const xml = await response.text();
            return parseArXivXML(xml);
        }

        async function searchPapers(keywords) {
            const response = await fetch(
                `${API_BASE}?search_query=all:${encodeURIComponent(keywords)}&start=0&max_results=10`,
                {
                    headers: {
                        'Accept': 'application/atom+xml'
                    }
                }
            );
            if (!response.ok) throw new Error('Failed to search papers');
            const xml = await response.text();
            return parseArXivXML(xml);
        }

        function parseArXivXML(xml) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(xml, 'text/xml');
            const entries = doc.querySelectorAll('entry');
            const papers = [];

            entries.forEach(entry => {
                const id = entry.querySelector('id').textContent;
                const title = entry.querySelector('title').textContent.trim();
                const summary = entry.querySelector('summary').textContent.trim();
                const published = new Date(entry.querySelector('published').textContent);
                const updated = new Date(entry.querySelector('updated').textContent);
                
                const authors = [];
                entry.querySelectorAll('author name').forEach(author => {
                    authors.push(author.textContent);
                });

                const categories = [];
                entry.querySelectorAll('category').forEach(cat => {
                    categories.push(cat.getAttribute('term'));
                });

                const pdfLink = entry.querySelector('link[title="pdf"]');
                const pdfUrl = pdfLink ? pdfLink.getAttribute('href') : '';

                papers.push({
                    id: id.split('/').pop(),
                    title,
                    summary,
                    published,
                    updated,
                    authors,
                    categories,
                    pdfUrl
                });
            });

            return papers;
        }

        function displayResults(papers) {
            if (papers.length === 0) {
                resultsEl.innerHTML = `
                    <div class="bg-gray-800 rounded-lg p-8 text-center">
                        <i class="fas fa-search text-gray-500 text-4xl mb-3"></i>
                        <p class="text-gray-300">No papers found.</p>
                    </div>
                `;
                return;
            }

            resultsEl.innerHTML = papers.map(paper => `
                <div class="paper-card bg-gray-800 rounded-lg p-6 mb-6 cursor-pointer" data-paper-id="${paper.id}">
                    <h3 class="text-xl font-bold text-white mb-3">${paper.title}</h3>
                    <div class="flex flex-wrap items-center gap-2 mb-3">
                        ${paper.categories.map(cat => `<span class="tag">${cat}</span>`).join('')}
                        <span class="text-sm text-gray-400">
                            <i class="far fa-calendar-alt mr-1"></i>${paper.published.toLocaleDateString()}
                        </span>
                    </div>
                    <p class="text-gray-300 mb-4 line-clamp-3">${paper.summary}</p>
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-400">
                            <i class="fas fa-user mr-1"></i>${paper.authors.slice(0, 3).join(', ')}${paper.authors.length > 3 ? ' et al.' : ''}
                        </div>
                        <button class="text-blue-400 hover:text-blue-300 font-medium view-detail-btn" data-paper='${JSON.stringify(paper).replace(/'/g, "&apos;")}'>
                            View Summary <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>
            `).join('');

            // Attach click handlers for view detail
            document.querySelectorAll('.view-detail-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const paper = JSON.parse(btn.dataset.paper.replace(/&apos;/g, "'"));
                    showPaperDetail(paper);
                });
            });

            // Attach click handlers for card
            document.querySelectorAll('.paper-card').forEach(card => {
                card.addEventListener('click', () => {
                    const paperId = card.dataset.paperId;
                    const paper = papers.find(p => p.id === paperId);
                    if (paper) showPaperDetail(paper);
                });
            });
        }

        function showPaperDetail(paper) {
            modalTitle.textContent = paper.title;
            
            // Generate a simulated summary (in real app, this would come from backend)
            const simulatedSummary = generateSimulatedSummary(paper);
            
            modalContent.innerHTML = `
                <div class="space-y-6">
                    <!-- Metadata -->
                    <div class="flex flex-wrap gap-2 mb-4">
                        ${paper.categories.map(cat => `<span class="tag">${cat}</span>`).join('')}
                    </div>
                    
                    <!-- Authors -->
                    <div>
                        <h4 class="text-sm font-semibold text-gray-400 mb-2">Authors</h4>
                        <p class="text-gray-300">${paper.authors.join(', ')}</p>
                    </div>
                    
                    <!-- Dates -->
                    <div class="flex gap-4 text-sm text-gray-400">
                        <span><i class="far fa-calendar-alt mr-1"></i>Published: ${paper.published.toLocaleDateString()}</span>
                        <span><i class="far fa-edit mr-1"></i>Updated: ${paper.updated.toLocaleDateString()}</span>
                    </div>
                    
                    <!-- PDF Link -->
                    ${paper.pdfUrl ? `
                    <div>
                        <a href="${paper.pdfUrl}" target="_blank" class="inline-flex items-center bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg">
                            <i class="fas fa-file-pdf mr-2"></i> Download PDF
                        </a>
                    </div>
                    ` : ''}
                    
                    <hr class="border-gray-700">
                    
                    <!-- Summary -->
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-3 flex items-center">
                            <i class="fas fa-robot text-blue-400 mr-2"></i> AI-Generated Summary
                        </h4>
                        <div class="prose prose-invert max-w-none text-gray-300">
                            ${simulatedSummary}
                        </div>
                    </div>
                    
                    <hr class="border-gray-700">
                    
                    <!-- Abstract -->
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-3">Abstract</h4>
                        <p class="text-gray-300 leading-relaxed">${paper.summary}</p>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function generateSimulatedSummary(paper) {
            // This is a placeholder. In production, this would call an AI API
            const sentences = [
                `<strong>Objective:</strong> This paper presents research on <em>${paper.categories[0] || 'AI'}</em> with the goal of advancing the state-of-the-art.`,
                `<strong>Methodology:</strong> The authors propose a novel approach that leverages recent developments in machine learning. The experimental setup includes standard benchmarks.`,
                `<strong>Key Findings:</strong> Results show significant improvement over baseline methods, with gains of up to 15% on standard metrics.`,
                `<strong>Conclusion:</strong> The proposed method demonstrates promising directions for future research in ${paper.categories.join(', ')}.`
            ];
            return sentences.join('<br><br>');
        }
    </script>
</body>
</html>